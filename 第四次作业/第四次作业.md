# Android 本地数据持久化综合实验报告

## 一、实验基本信息

| 项目       | 内容                                                         |

|------------|--------------------------------------------------------------|

| 实验名称   | Android 本地数据持久化综合实验                               |

| 实验环境   | Android Studio 2023.1.1、Android 11 模拟器、Java 11          |

| 实验目标   | 掌握文件读写、SharedPreferences、SQLite 三种本地存储方式；实现含文本编辑、配置管理、数据库记录的综合应用 |

## 二、实验原理概述

Android 本地数据持久化确保应用退出后数据不丢失，三种核心方式适配不同场景：

1. 文件读写：适用于大量非结构化文本数据（如记事本全文）；

2. SharedPreferences：适用于简单键值对配置（如用户偏好、开关状态）；

3. SQLite 数据库：适用于多条结构化数据的管理（如备忘录记录）。

## 三、实验内容与功能实现

### 3.1 整体架构

应用包含 4 个核心界面，通过 Intent 跳转，数据按需共享：主界面（文本编辑+核心操作）、设置界面（配置管理）、记录列表界面（数据展示）、记录详情界面（单条数据查看）。

### 3.2 核心模块功能

#### 3.2.1 文件读写模块

实现文本在应用私有目录 `note.txt` 文件的保存与加载：点击「保存到文件」将输入框内容写入文件，输入为空时提示；点击「从文件加载」读取内容并填充到输入框，文件不存在时反馈异常；支持与设置界面的自动保存开关联动，开启后退出应用时自动保存非空内容。

#### 3.2.2 设置模块（SharedPreferences）

管理应用配置：设置界面提供昵称、密码输入框及自动保存开关；点击保存按钮将配置以键值对形式持久化存储；打开设置界面时自动加载历史配置；主界面实时同步昵称到标题栏，显示「欢迎，XXX」。

#### 3.2.3 数据库模块（SQLite）

实现结构化记录管理：创建 `myapp.db` 数据库及 `records` 表（含 _id、标题、内容、时间字段）；主界面可将输入内容保存为数据库记录；列表界面展示所有记录，支持点击查看详情、长按删除记录。

## 四、界面与交互设计

界面布局简洁直观，主界面以输入框为核心、功能按钮分区排列；设置界面垂直布局配置项；列表界面清晰展示记录信息。所有操作均有 Toast 反馈结果，异常场景（如文件不存在、输入为空）有处理，符合 Android 常规交互逻辑。

## 五、实验总结与心得

### 5.1 实验总结

成功实现三种存储方式的综合应用，覆盖不同数据场景：文件读写适用于大量文本，SharedPreferences 适用于简单配置，SQLite 适用于结构化批量数据。应用功能联动流畅，数据持久化稳定，达成实验目标。

### 5.2 实验心得

需根据数据类型和操作需求选择合适的存储方式；合理运用 Android 生命周期可提升应用体验；结构化设计（表设计、架构分层）便于代码维护；异常处理和用户反馈是应用开发的重要细节。

