# Android 项目代码文档

## MainActivity 代码

```
package com.example.myapplication;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RadioGroup;
import android.widget.TextView;
import androidx.appcompat.app.AppCompatActivity;
import androidx.fragment.app.Fragment;
public class MainActivity extends AppCompatActivity implements
MyFragment.OnFragmentInteractionListener,
FragmentA.OnFragmentInteractionListener{
    private RadioGroup radioGroup;
    private Fragment fragment1,fragment2,fragment3,fragment4,myFragment;
    private EditText editText;
    private TextView textView;
    public String TAG="Lifecycle";
    @Override
    protected void onCreate(Bundle savedInstanceState){
        Log.d(TAG,"onCreate");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        radioGroup= findViewByld(R.id.radioGroup);
        editText= findViewByld(R.id.editText);
        textView=findViewByld(R.id.textView);
        // Initialize fragments
        fragment1= new Fragment1();
        fragment2= new Fragment2();
        fragment3= new Fragment3();
        fragment4= new Fragment4();
        myFragment= new MyFragment();
        // Set initial fragment
        getSupportFragmentManager().beginTransaction()
                .replace(R.id.fragmentContainer, fragment1)
                .commit();
        radioGroup.setOnCheckedChangeListener((group,checkedld)->{
            Fragment selectedFragment= null;
            if(checkedld== Rid.radioButton1){
                selectedFragment= fragment1;
            }else if(checkedld== R.id.radioButton2){
                selectedFragment= fragment2;
            }else if(checkedld== Ri.id.radioButton3){
                selectedFragment= fragment3;
            }else if(checkedld== Rid.radioButton4){
                selectedFragment= fragment4;
            }
            if(selectedFragment!= null){
                getSupportFragmentManager().beginTransaction()
                        .replace(R.id.fragmentContainer, selectedFragment)
                        .commit();
            }
        })
        // Button to send data to DetailActivity
        Button btnSendData=findViewByld(R.id.btnSendData);
        btnSendData.setOnClickListener(v->{
            Intent intent= new Intent(MainActivity.this, DetailActivity.class);
            Bundle bundle= new Bundle();
            bundle.putString("username","John Doe");
            bundle.putInt("age",25);
            bundle.putBoolean("isStudent", true);
            intent.putExtras(bundle);
            startActivity(intent);
        });
        // Restore saved state
        if(savedInstanceState!= null){
            String savedText= savedInstanceState.getString("editTextContent");
            textView.setText(savedText);
            Log.d("Lifecycle","Restored saved state");
    @Override
    protected void onStart(){
        super.onStart();
        Log.d(TAG,"onStart");
    @Override
    protected void onResume(){
        super.onResume();
        Log.d(TAG,"onResume");
        //开始动画、监听传感器等
    @Override
    protected void onPause(){
        super.onPause();
        Log.d(TAG,"onPause");
        //暂停动画、停止传感器等
    @Override
    protected void onStop(){
        super.onStop();
        Log.d(TAG,"onStop");
    @Override
    protected void onRestart(){
        super.onRestart();
        Log.d(TAG,"onRestart");
    @Override
    protected void onDestroy(){
        super.onDestroy();
        Log.d(TAG,"onDestroy");
        //清理资源，避免内存泄漏
    @Override
    protected void onSavelnstanceState(Bundle outState){
        super.onSavelnstanceState(outState);
        outState.putString("editTextContent",editText.getText().toString());
        Log.d("Lifecycle","onSavelnstanceState called");
    @Override
    protected void onRestorelnstanceState(Bundle savedlnstanceState){
        super.onRestorelnstanceState(savedInstanceState);
        Log.d("Lifecycle","onRestorelnstanceState called");
    // Implementation of MyFragment interface
    @Override
    public void onFragmentResult(String result){
        textView.setText(result);
    // Implementation of FragmentA interface
    @Override
    public void onDataPassed(String data){
        // In a real app, you would have FragmentB in the layout and find it here
        // For demo purposes, we'll just show it in the TextView
        textView.setText("Data received from FragmentA:"+ data);
```

## DetailActivity 代码

```
package com.example.myapplication;
import android.os.Bundle;
import android.widget.TextView;
import androidx.appcompat.app.AppCompatActivity;

public class DetailActivity extends AppCompatActivity{
    @Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_detail);
        Bundle bundle=getIntent().getExtras();
        if(bundle!= null){
            String username= bundle.getString("username");
            int age= bundle.getInt("age");
            boolean isStudent= bundle.getBoolean("isStudent");
            TextView tvUsername= findViewByld(R.id.tvUsername);
            TextView tvAge= findViewByld(R.id.tvAge);
            TextView tvlsStudent= findViewByld(R.id.tvlsStudent);
            tvUsername.setText("Username:"+ username);
            tvAge.setText("Age:"+ age);
            tvlsStudent.setText("Is Student:"+(isStudent?"Yes":"No"));
        }
    }
}
```

## MyFragment 代码

```
package com.example.myapplication;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.TextView;
import androidx.fragment.app.Fragment;
public class MyFragment extends Fragment{
    private OnFragmentInteractionListener mListener;
    public interface OnFragmentInteractionListener{
        void onFragmentResult(String result);
    }
    @Override
    public void onAttach(Context context){
        super.onAttach(context);
        if(context instanceof OnFragmentInteractionListener){
            mListener=(OnFragmentInteractionListener) context;
        }else{
            throw new RuntimeException(context.toString()
                    +" must implement OnFragmentInteractionListener");
        }
    }
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedlnstanceState){
        View view=inflater.inflate(R.layout.fragment_my,container,false);
        TextView textView= view.findViewByld(R.id.textView);
        Button button= view.findViewByld(R.id.button);
        if(getArguments()!= null){
            String initialData=getArguments().getString("initialData","No data received");
            textView.setText(initialData);
        }
        button.setOnClickListener(v->{
            if(mListener!= null){
                mListener.onFragmentResult("Processed data from Fragment");
            }
        });
        return view;
    }
    @Override
    public void onDetach(){
        super.onDetach();
        mListener= null;
    }
}
```

## FragmentA 代码

```
package com.example.myapplication;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import androidx.fragment.app.Fragment;
public class FragmentA extends Fragment{
    private OnFragmentInteractionListener mListener;

    public interface OnFragmentInteractionListener{
        void onDataPassed(String data);
    }
    @Override
    public void onAttach(Context context){
        super.onAttach(context);
        if(context instanceof OnFragmentInteractionListener){
            mListener=(OnFragmentInteractionListener) context;
        }
    }
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        View view=inflater.inflate(R.layout.fragment_a,container,false);
        Button button= view.findViewByld(R.id.button);
        button.setOnClickListener(v->{
            if(mListener!= null){
                mListener.onDataPassed("Data from Fragment A");
            }
        });
        return view;
    }
}
```

## FragmentB 代码

```
package com.example.myapplication;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;
import androidx.fragment.app.Fragment;

public class FragmentB extends Fragment{
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        return inflater.inflate(R.layout.fragment_b,container,false);
    }
    public void receiveData(String data){
        TextView textView= getView().findViewById(R.id.textView);
        textView.setText(data);
    }
}
```

## Fragment1 代码

```
package com.example.myapplication;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.Toast;
import androidx.fragment.app.Fragment;
public class Fragment1 extends Fragment{
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        View view=inflater.inflate(R.layout.fragment_1, container, false);
        Button button= view.findViewByld(R.id.button1);
        button.setOnClickListener(v->{
            Toast.makeText(getActivity(),"Fragment 1 Button Clicked", Toast.LENGTH_SHORT).show();
        });
        return view;
    }
}
```

## Fragment2 代码

```
package com.example.myapplication;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.Toast;
import androidx.fragment.app.Fragment;
public class Fragment2 extends Fragment{
    @Override
    public View onCreateView(Layoutlnflater inflater, ViewGroup container, Bundle savedInstanceState){
        View view=inflater.inflate(R.layout.fragment_2, container, false);
        Button button= view.findViewByld(R.id.button2);
        button.setOnClickListener(v->{
            Toast.makeText(getActivity(),"Fragment 2 Button Clicked", Toast.LENGTH_SHORT).show();
        });
        return view;
    }
}
```

## Fragment3 代码

```
package com.example.myapplication;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.Toast;
import androidx.fragment.app.Fragment;
public class Fragment3 extends Fragment{
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        View view=inflater.inflate(R.layout.fragment_3,container,false);
        Button button= view.findViewByld(R.id.button3);
        button.setOnClickListener(v->{
            Toast.makeText(getActivity(),"Fragment 3 Button Clicked", Toast.LENGTH_SHORT).show();
        });
        return view;
    }
}
```

## Fragment4 代码

```
package com.example.myapplication;
import android.os.Bundle;
import android.view.Layoutlnflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.Toast;
import androidx.fragment.app.Fragment;
public class Fragment4 extends Fragment{
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        View view=inflater.inflate(R.layout.fragment_4, container, false);
        Button button= view.findViewByld(R.id.button4);
        button.setOnClickListener(v->{
            Toast.makeText(getActivity(),"Fragment 4 Button Clicked", Toast.LENGTH_SHORT).show();
        });
        return view;
    }
}
```

## activity_main.xml 布局代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity">

    <RadioGroup
        android:id="@+id/radioGroup"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/purple_500"
        android:orientation="horizontal"
        android:padding="8dp"
        android:weightSum="4">
        <RadioButton
            android:id="@+id/radioButton1"
            style="@style/RadioButtonStyle"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/fragment1_text"/>
        <RadioButton
            android:id="@+id/radioButton2"
            style="@style/RadioButtonStyle"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/fragment2_text"/>
        <RadioButton
            android:id="@+id/radioButton3"
            style="@style/RadioButtonStyle"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/fragment3_text"/>
        <RadioButton
            android:id="@+id/radioButton4"
            style="@style/RadioButtonStyle"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/fragment4_text"/>
    </RadioGroup>

    <FrameLayout
        android:id="@+id/fragmentContainer"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"/>

    <EditText
        android:id="@+id/editText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="@string/enter_text"
        android:layout_margin="16dp"/>

    <TextView
        android:id="@+id/textView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="16dp"
        android:textSize="18sp"/>

    <Button
        android:id="@+id/btnSendData"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/send_data"
        android:layout_gravity="center"
        android:layout_margin="16dp"/>

</LinearLayout>
```

## activity_detail.xml 布局代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="16dp">

    <TextView
        android:id="@+id/tvUsername"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="18sp"
        android:layout_marginBottom="8dp"/>

    <TextView
        android:id="@+id/tvAge"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="18sp"
        android:layout_marginBottom="8dp"/>

    <TextView
        android:id="@+id/tvlsStudent"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="18sp"/>

</LinearLayout>
```

## fragment_my.xml 布局代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="16dp">

    <TextView
        android:id="@+id/textView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="18sp"
        android:layout_marginBottom="16dp"/>

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_text"/>

</LinearLayout>
```

## fragment_a.xml 布局代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center"
    android:background="#FFBBDEFB">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Fragment A"
        android:textSize="24sp"/>

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Send to Fragment B"
        android:layout_marginTop="16dp"/>

</LinearLayout>
```

## fragment_b.xml 布局代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center"
    android:background="#FFD7CCC8">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Fragment B"
        android:textSize="24sp"/>

    <TextView
        android:id="@+id/textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="18sp"
        android:layout_marginTop="16dp"/>

</LinearLayout>
```

## fragment_1.xml 布局代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center"
    android:background="@color/purple_200">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/fragment1_text"
        android:textSize="24sp"/>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_text"
        android:layout_marginTop="16dp"/>

</LinearLayout>
```

## fragment_2.xml 布局代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center"
    android:background="@color/teal_200">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/fragment2_text"
        android:textSize="24sp"/>

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_text"
        android:layout_marginTop="16dp"/>

</LinearLayout>
```

## fragment_3.xml 布局代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center"
    android:background="#FFC8E6C9">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/fragment3_text"
        android:textSize="24sp"/>

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_text"
        android:layout_marginTop="16dp"/>

</LinearLayout>
```

## fragment_4.xml 布局代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center"
    android:background="#FFF8BBD0">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/fragment4_text"
        android:textSize="24sp"/>

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_text"
        android:layout_marginTop="16dp"/>

</LinearLayout>
```
