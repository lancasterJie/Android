# Android Activity Lifecycle实验报告

---

姓名：连冰	学号：42316042	班级：软件2301班	实验日期：2025-10-12	实验内容：Android Activity 生命周期

---

## 一、实验名称

Android Activity Lifecycle ——Android Activity 生命周期观察实验

## 二、实验目的

了解 Activity 的生命周期 (Lifecycle)

## 三、实验环境

1. 开发工具：Android Studio
2. 开发语言：Java

## 四、实验内容与实现说明

1. **创建 FirstActivity**
   - 创建 MainActivity，重写所有生命周期方法
   - 在每个生命周期方法中添加 Log 输出，格式：`Log.d("Lifecycle", "MainActivity - onCreate")`
```xml
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="20dp">

    <TextView
        android:id="@+id/tv_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="生命周期实验 - 主活动"
        android:textSize="22sp"
        android:textStyle="bold"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent"/>

    <Button
        android:id="@+id/btn_go_second"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="跳转至普通Activity"
        android:layout_marginTop="30dp"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintTop_toBottomOf="@id/tv_title"/>

    <Button
        android:id="@+id/btn_go_dialog"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="跳转至对话框Activity"
        android:layout_marginTop="15dp"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintTop_toBottomOf="@id/btn_go_second"/>

</androidx.constraintlayout.widget.ConstraintLayout>
```
```java
package com.example.myapplication;

import androidx.appcompat.app.AppCompatActivity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;

/**
 * 主活动，用于启动其他活动并观察生命周期
 */
public class MainActivity extends AppCompatActivity {
    private static final String TAG = "Lifecycle";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Log.d(TAG, "MainActivity - onCreate");

        // 初始化按钮事件
        initViews();
    }

    /**
     * 初始化界面控件及点击事件
     */
    private void initViews() {
        // 跳转到普通SecondActivity
        Button toSecondBtn = findViewById(R.id.btn_go_second);
        toSecondBtn.setOnClickListener(v -> navigateToSecondActivity());

        // 跳转到对话框Activity
        Button toDialogBtn = findViewById(R.id.btn_go_dialog);
        toDialogBtn.setOnClickListener(v -> navigateToDialogActivity());
    }

    /**
     * 跳转到普通Activity
     */
    private void navigateToSecondActivity() {
        Intent intent = new Intent(this, SecondActivity.class);
        startActivity(intent);
    }

    /**
     * 跳转到对话框样式Activity
     */
    private void navigateToDialogActivity() {
        Intent intent = new Intent(this, DialogActivity.class);
        startActivity(intent);
    }

    // 以下为生命周期方法重写
    @Override
    protected void onStart() {
        super.onStart();
        Log.d(TAG, "MainActivity - onStart");
    }

    @Override
    protected void onResume() {
        super.onResume();
        Log.d(TAG, "MainActivity - onResume");
    }

    @Override
    protected void onPause() {
        super.onPause();
        Log.d(TAG, "MainActivity - onPause");
    }

    @Override
    protected void onStop() {
        super.onStop();
        Log.d(TAG, "MainActivity - onStop");
    }

    @Override
    protected void onRestart() {
        super.onRestart();
        Log.d(TAG, "MainActivity - onRestart");
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        Log.d(TAG, "MainActivity - onDestroy");
    }
}
```

2. **创建普通 SecondActivity**

- 创建第二个普通 Activity
- 同样重写所有生命周期方法并添加 Log 输出
```xml
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="20dp">

    <TextView
        android:id="@+id/tv_second_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="普通SecondActivity"
        android:textSize="20sp"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent"/>

    <Button
        android:id="@+id/btn_back_main"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="返回主活动"
        android:layout_marginTop="30dp"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toBottomOf="@id/tv_second_title"/>

</androidx.constraintlayout.widget.ConstraintLayout>
```

```java
package com.example.myapplication;

import androidx.appcompat.app.AppCompatActivity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;

/**
 * 普通样式的第二个活动
 */
public class SecondActivity extends AppCompatActivity {
    private static final String TAG = "Lifecycle";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_second);
        Log.d(TAG, "SecondActivity - onCreate");

        // 返回主活动按钮
        Button backBtn = findViewById(R.id.btn_back_main);
        backBtn.setOnClickListener(v -> finish());
    }

    // 生命周期方法重写
    @Override
    protected void onStart() {
        super.onStart();
        Log.d(TAG, "SecondActivity - onStart");
    }

    @Override
    protected void onResume() {
        super.onResume();
        Log.d(TAG, "SecondActivity - onResume");
    }

    @Override
    protected void onPause() {
        super.onPause();
        Log.d(TAG, "SecondActivity - onPause");
    }

    @Override
    protected void onStop() {
        super.onStop();
        Log.d(TAG, "SecondActivity - onStop");
    }

    @Override
    protected void onRestart() {
        super.onRestart();
        Log.d(TAG, "SecondActivity - onRestart");
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        Log.d(TAG, "SecondActivity - onDestroy");
    }
}
```

3. **创建 Dialog Activity**

- 创建第三个 Activity，设置为主题为对话框样式

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="320dp"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="16dp"
    android:background="@android:color/white">

    <TextView
        android:id="@+id/tv_dialog_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="对话框样式Activity"
        android:textSize="18sp"
        android:textColor="@android:color/black"/>

    <Button
        android:id="@+id/btn_dismiss"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="关闭"
        android:layout_marginTop="20dp"/>

</LinearLayout>
```

- 重写所有生命周期方法并添加 Log 输出

```java
package com.example.myapplication;

import androidx.appcompat.app.AppCompatActivity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;

/**
 * 对话框样式的活动
 */
public class DialogActivity extends AppCompatActivity {
    private static final String TAG = "Lifecycle";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_dialog);
        Log.d(TAG, "DialogActivity - onCreate");

        // 关闭对话框按钮
        Button dismissBtn = findViewById(R.id.btn_dismiss);
        dismissBtn.setOnClickListener(v -> finish());
    }

    // 生命周期方法重写
    @Override
    protected void onStart() {
        super.onStart();
        Log.d(TAG, "DialogActivity - onStart");
    }

    @Override
    protected void onResume() {
        super.onResume();
        Log.d(TAG, "DialogActivity - onResume");
    }

    @Override
    protected void onPause() {
        super.onPause();
        Log.d(TAG, "DialogActivity - onPause");
    }

    @Override
    protected void onStop() {
        super.onStop();
        Log.d(TAG, "DialogActivity - onStop");
    }

    @Override
    protected void onRestart() {
        super.onRestart();
        Log.d(TAG, "DialogActivity - onRestart");
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        Log.d(TAG, "DialogActivity - onDestroy");
    }
}
```

## 五、实验结果

| 场景                            | FirstActivity 生命周期顺序                                   | 目标Activity 生命周期顺序                                    |
| ------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 应用启动                        | onCreate: MainActivity<br/>onStart: FirstActivity<br/>onResume: FirstActivity | /                                                            |
| MainActivity → SecondActivity  | onPause: MainActivity<br/>onStop: FirstActivity             | onCreate: SecondActivity<br/>onStart: SecondActivity<br/>onResume: SecondActivity |
| SecondActivity 返回             | onStart: MaintActivity<br/>onResume: FirstActivity | onPause: SecondActivity<br/>onStop: SecondActivity<br/>onDestroy: SecondActivity |
| MainActivity → Dialog Activity | onPause: MainActivity                                       | onCreate: DialogActivity<br/>onStart: DialogActivity<br/>onResume: DialogActivity |
| Dialog Activity 返回            | onResume: MainActivity                                      | onPause: DialogActivity<br/>onStop: DialogActivity<br/>onDestroy: DialogActivity |



<center>总的实验截图</center>
<img width="2501" height="1290" alt="image" src="https://github.com/user-attachments/assets/b984ff32-abcb-4311-b596-40db3a8fc8ee" />
<img width="2538" height="1403" alt="image" src="https://github.com/user-attachments/assets/d19fad0e-efd7-45fc-83ba-78718ebafa22" />


